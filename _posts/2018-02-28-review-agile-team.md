---
layout: post
title: "实施敏捷中的N个浪费"
description: ""
category: 
tags: []
---
{% include JB/setup %}

当我们说到敏捷转型时，通常大家会想到需要转型的团队一定是有陈旧的技术栈；混乱的技术架构，软件系统各个模块有错综复杂的依赖关系，或者根本没有分明确的模块，就是复杂的一大团；人员结构不符合敏捷团队特征，部门间隔阂严重，职责分化；需求，开发，测试，部署过程有沉重的流程控制。

但是，如果你的项目团队没有任何一个上述问题，就是敏捷的吗？

比如最近做的一个敏捷转型项目，其旨在分析产品线上收集到的的实时数据做线路策略调整，以减少浪费，节约成本。其背后有数学科学家团队对数据模型的分析评估，产品分析团队实时与用户沟通，得到的反馈实时告知在同一个办公室的开发人员并快速做出修改，并可直接上线。产品经理和团队在同一个开放办公室，有任何问题会实时沟通，产品经理们每天会对产品进行评估分析，定期对新策略结果进行分析并直接反应在开发的任务栏里。这样的团队和项目貌似已经敏捷了。

然而，做完敏捷成熟度评估(围绕敏捷的相关九个方面对项目团队现状做分析和打分)，发现团队在实施敏捷时还存在不少浪费。

<div style="text-align:center"><img src ="/assets/images/waste-in-project.png" style="height:300px;" /></div>

#### **首先，在需求管理上。**

开发的需求至少有三个来源，很难将所有的需求整体管理，导致所有需求的优先级不明确，于是无法在人员和时间有限的情况下最快速创造出最需要的价值。这种现象在很多项目特别是部门划分错综复杂的组织中很常见。

当花时间在不恰当的需求开发上时，看似有成果产出，但也造成了人员浪费。看似简单的KANBAN Backlog在有形和无形中起着关键的作用。

当Product owner或客户不按计划出牌怎么办？在IPM完成后有新的需求要求被完成，很多项目特别是试验性项目中很容易出现如此状况。这种情况可能导致或者还未开始的卡片被替换掉，甚至可能正在进行的卡片中有的被叫停，与其相关的已完成的卡片或正在进行的这张卡片的工作量就完全是浪费。团队因频繁变化而切换上下文的浪费也存在其中。实际项目中，这种现象无法完全避免，敏捷本身也是要快速响应变化，但能避免的浪费也不是敏捷项目希望存在的。应对此现象的一个可行方案是在IPM之前尽量和PO协调好下个迭代要完成的业务目标，尽量避免大的业务目标的改动，尽全力保护团队在安全的环境内全力以赴。如果必须添加新需求，应评估其大小和相对计划中任务的优先级，移除最低优先级并与新加需求相近点数的任务卡片。当然在这个过程中需要有效清晰地和需求提出方沟通解释以避免不必要的质疑和阻力。

有时需求优先级很清晰仍然会有高优先级的任务搁置，低优先级的却在进行中的现象，也非团队不愿避免，可能是心有余而力不足。 例如，开发分为不同小团队，每人或每几人各专一部分，互相之间稍有了解，但是不能互相帮助完成开发，这是常见现象，但也是导致上述问题的原因。不是要求团队成员都是全才，专业侧重没问题而且有必要，但是需要能够协同开发才能避免不必要的浪费，至少同一个产品的团队开发成员需要做到。侧重某一方面或模块的人员作为此模块的专家，做全局和质量把控和难点解决，包括模块间的集成。

#### **其次，在人员协作上。**

同样造成人员时间浪费的还有一个人同时工作在多个任务上。开发人员的上下文切换是很大的隐性浪费，每一次切换到另外一个任务都需要大脑抽出当前任务，了解或回忆起另一个任务的上下文。大部分开发人员应该有同感，要达到开发的高效状态，就要一个完整的时间段专注在一件事情上。结对编程在一定程度上也起到了避免这种浪费的作用。每个人或者每对pair在KANBAN或类KANBAN的任务管理版面上只负责一张卡片，在一起完成后，再拿另一个需要完成的任务，才能够达到按优先级顺序高效地提供价值的目的。

但有时上下文切换无可避免。当Kickoff(开发开始前与BA和QA等确认需求的会议)后的任务卡片有任何的需求改动需要实时告知相关人员特别是开发人员以尽可能减少浪费，紧急线上产品问题也需要开发人员的及时介入。敏捷认为实时的人员沟通高于清晰完整的文档，并不意味着完全不需要文档，比如承载需求上线文的任务卡片就是必不可少的，需求的关键信息需要准确无误地记录。因为虽然可以和需求方实时沟通，但是沟通后仍然需要反复追加更改或者澄清信息的现象，相信任何团队都不期望发生。这也是为什么说Kickoff是最后一次完整地统一需求理解的时机。

避免不必要的上下文切换并避免任务卡在分析，开发和测试间反复跳动的现象，标准的Kickoff和Deskcheck（开发完成后和BA及QA等验证需求的会议）功不可没。Kickoff要求相关人员在任务被开发前对需求理解完整并一致，侧面上也鞭策了BA，QA和DEV认真理解需求及其要达到的价值并讨论补充可能不清晰或漏掉的场景或细节。一定意义上也可避免大家对任务完成的标准不明确，导致任务卡片在各状态间来回跳动的现象。Deskcheck进一步验证开发前统一期望的价值确实完备无误地被完成。进而达到避免需求分析改动，开发和测试，甚至showcase四个环节因反馈链太长而导致的浪费。

有团队成员说他们在到开发环节前有沟通需求，只是没有做标准的kickoff，开发完成后产品分析人员或产品经理也会看一下再上线，Kickoff和Deskcheck的形式不重要。但是我要说，仪式感有时很重要，当它成为一种习惯，不必要的疏忽才能避免。试验性项目的需求管理相对复杂，在开发完成前无法明确期望的结果是什么，特别是细节，比如新建的模型是否是更优模型。这种项目的Acceptance Criteria和Kickoff的关注点就应该是业务价值或要达到的目标而非最终呈现的结果如页面上的表象。


#### **再次，在基础设施搭建和技术流程上。**

代码库版本控制工具避免浪费。版本控制工具被普遍使用的今天，你可能很难想象为什么有人不使用它。深入了解某个项目后，发现确实有合理原因，这也充分体现了各个现实项目情况的错综复杂。原因有下：

其一，代码源头有二，正常的代码修改和从spotfire（一个可编码的数据分析工具）中反向generate出来的，而且多数时候需要修改的代码需要在spotfire中呈现并分析后才可判断是否正确并提交；
其二，主要代码为pl sql，直接导入数据库，修改和管理代码方便快捷；
其三，只有两人左右在维护一个代码库，每天改动代码量也不大，联合调试没有很痛苦。

然而，没有版本控制工具的痛点也清晰可见。

一，部署前需要手动剥离用来测试的代码和真正的产品代码，从一堆可能是别人开发的或是工具generate出来的，完全不清楚或记不清楚的，时间可能已经久远的错综关联的代码中挑出需要上线的代码是一件非常危险和令人抓狂的事情。导致合并代码并提交需要花大量的时间。

二，代码冲突可能不多，但是仍可能发生互相覆盖。以命名做版本控制（人名为后缀，或者v1...为后缀），完成后直接覆盖另一版本导致直接无法看到真正的改动及其历史和目的。当需要回滚到之前版本，并加上一小部分优化代码时，需要创建一个新的版本，导致时间浪费。

三，项目还需多个版本需要同时维护，各种文件命名将代码库搞得混乱不堪，直接降低开发人员的效率。

四，与其相关的还有所有人共用一个测试环境的问题，没有唯一的代码库，即使有其他环境，也无法保证每个环境的代码一致，更无需谈控制不同环境用可控的版本。增加调试和测试的复杂度和时间。

这些痛点让产品质量像在走钢丝一样充满不确定性。

无法容忍这些痛点就只能解决应用版本控制工具的难点，包括一个测试数据库需要T级别。软件开发有时确实像在博弈，时刻都在权衡。

所有人共用一个测试环境自然就无法做自动化测试，即使开发人员不抱怨测试环境为什么总是不稳定，测试人员也会头疼为什么正在测试的功能突然就不工作了。无自动化测试就导致无法保证上线后所有的已有功能完好无损，测试人员需要重复地完成相同场景的测试。完整合理的测试策略，看似很简单的事，却可以作为一把尺子，帮助度量从开发到上线整个过程中对质量的关卡是否有缺失或漏洞。试想，如果最初团队就定下测试策略，拟定何时何人需要做何种类型的测试，单元测试，集成测试，契约测试，安全测试，自动化或是手工测试，TDD和自动化测试自然就会有，测试环境也会在项目开始时就绪。代码和数据版本不一致，反复沟通，增加的调试和测试成本浪费也会被大幅度避免。

#### **小结**

敏捷不只是快，更重要的是高质量地产出正确的产品。敏捷之所以被推崇和应用，但很多团队敏捷转型失败或是空有其表，个人认为是在实际项目中千变万化的问题和压力无法找到敏捷的方法，敏捷方法多样，在什么团队什么情况什么实践是必须有如何做都不同。团队需要的是Be agile而非Do agile。

你的团队如何呢？是否在交付压力下放弃了必要的敏捷实践，从而出现各种浪费？私认为敏捷实践之一就是不断审视自己所在的项目和团队，无论你的项目是以敏捷的方式创建的，还是后来转型成功的。

当你看到项目中有浪费时，就是需要重新审视项目是否真的敏捷，需要改变之时。

